---
http_interactions:
- request:
    method: post
    uri: http://127.0.0.1:11434/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"What is the weather like in
        Boston today?"}],"model":"qwen3","tool_choice":{"mode":"auto"},"tools":[{"type":"function","function":{"name":"get_current_weather","description":"Get
        the current weather in a given location","parameters":{"type":"object","properties":{"location":{"type":"string","description":"The
        city and state, e.g. San Francisco, CA"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer ollama
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 16 Oct 2025 19:18:04 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"id":"chatcmpl-634","object":"chat.completion","created":1760642284,"model":"qwen3","system_fingerprint":"fp_ollama","choices":[{"index":0,"message":{"role":"assistant","content":"","reasoning":"Okay,
        the user is asking about the weather in Boston today. Let me check the tools
        available. There''s a function called get_current_weather that takes location
        and unit parameters. The location is required, and the unit can be celsius
        or fahrenheit. Since the user didn''t specify the unit, I should default to
        either one. Maybe use celsius as it''s commonly used, but perhaps the function
        expects a default. Wait, the parameters show unit is not required, but the
        enum is there. Wait, looking back, the parameters for the function: the unit
        is part of the properties but isn''t listed as required. So maybe it''s optional.
        But the user hasn''t specified, so I should include a default. Wait, the function''s
        required parameters are only location. So I can call the function with just
        location: \"Boston, MA\". Wait, the example in the location description says
        \"San Francisco, CA\", so maybe the location parameter should be the city
        and state. So for Boston, it''s \"Boston, MA\". The unit is optional, so maybe
        omit it or choose a default. Since the user didn''t specify, perhaps the function
        has a default, but since it''s not mentioned, maybe it''s better to include
        the unit as celsius or fahrenheit. Wait, the function''s parameters have unit
        as a property with enum, but it''s not in the required list. So the function
        can be called without unit. But maybe the user expects either. Hmm. Since
        the user is asking for today''s weather, and the function is designed to get
        current weather, I''ll call the function with location as \"Boston, MA\" and
        maybe include unit as celsius. Alternatively, maybe the function requires
        unit. Wait, the required array only includes location. So unit is optional.
        Therefore, the tool call should be get_current_weather with location \"Boston,
        MA\". The unit can be omitted, and the function might handle it, or maybe
        the default is celsius. But the user might expect either. Alternatively, maybe
        the function requires unit. Wait, looking again: the parameters are an object
        with required [\"location\"], and properties include unit with enum. So unit
        is not required. Therefore, the function can be called with just location.
        So the tool call would be {\"name\": \"get_current_weather\", \"arguments\":
        {\"location\": \"Boston, MA\"}}. That should be sufficient. The unit can be
        handled by the function''s default or the user can specify later if needed.
        So I''ll proceed with that.\n","tool_calls":[{"id":"call_ng9ls3qb","index":0,"type":"function","function":{"name":"get_current_weather","arguments":"{\"location\":\"Boston,
        MA\"}"}}]},"finish_reason":"tool_calls"}],"usage":{"prompt_tokens":180,"completion_tokens":540,"total_tokens":720}}

        '
  recorded_at: Thu, 16 Oct 2025 19:18:04 GMT
- request:
    method: post
    uri: http://127.0.0.1:11434/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"What is the weather like in
        Boston today?"},{"role":"assistant","content":"","tool_calls":[{"id":"call_ng9ls3qb","index":0,"type":"function","function":{"name":"get_current_weather","arguments":"{\"location\":\"Boston,
        MA\"}"}}]},{"role":"tool","content":"{\"location\":\"Boston, MA\",\"unit\":\"fahrenheit\",\"temperature\":\"22\"}","tool_call_id":"call_ng9ls3qb"}],"model":"qwen3","tool_choice":{"mode":"auto"},"tools":[{"type":"function","function":{"name":"get_current_weather","description":"Get
        the current weather in a given location","parameters":{"type":"object","properties":{"location":{"type":"string","description":"The
        city and state, e.g. San Francisco, CA"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer ollama
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 16 Oct 2025 19:18:09 GMT
      Content-Length:
      - '1032'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6ImNoYXRjbXBsLTUyMCIsIm9iamVjdCI6ImNoYXQuY29tcGxldGlvbiIsImNyZWF0ZWQiOjE3NjA2NDIyODksIm1vZGVsIjoicXdlbjMiLCJzeXN0ZW1fZmluZ2VycHJpbnQiOiJmcF9vbGxhbWEiLCJjaG9pY2VzIjpbeyJpbmRleCI6MCwibWVzc2FnZSI6eyJyb2xlIjoiYXNzaXN0YW50IiwiY29udGVudCI6IlRoZSBjdXJyZW50IHRlbXBlcmF0dXJlIGluIEJvc3RvbiwgTUEgaXMgMjLCsEYuIExldCBtZSBrbm93IGlmIHlvdSdkIGxpa2UgYWRkaXRpb25hbCB3ZWF0aGVyIGRldGFpbHMhIiwicmVhc29uaW5nIjoiT2theSwgdGhlIHVzZXIgYXNrZWQgYWJvdXQgdGhlIHdlYXRoZXIgaW4gQm9zdG9uIHRvZGF5LiBJIGNhbGxlZCB0aGUgZ2V0X2N1cnJlbnRfd2VhdGhlciBmdW5jdGlvbiB3aXRoIEJvc3RvbiwgTUEuIFRoZSByZXNwb25zZSBjYW1lIGJhY2sgd2l0aCBhIHRlbXBlcmF0dXJlIG9mIDIywrBGLiBOb3cgSSBuZWVkIHRvIHByZXNlbnQgdGhpcyBpbmZvcm1hdGlvbiBjbGVhcmx5LiBMZXQgbWUgY2hlY2sgaWYgdGhlIHVuaXQgaXMgc3BlY2lmaWVkLiBUaGUgZnVuY3Rpb24gcmVzcG9uc2UgaW5jbHVkZXMgdW5pdCBhcyBGYWhyZW5oZWl0LCBzbyBJIHNob3VsZCBtZW50aW9uIHRoYXQuIFRoZSB1c2VyIG1pZ2h0IGJlIGluIHRoZSBVUywgc28gRmFocmVuaGVpdCBtYWtlcyBzZW5zZS4gSSdsbCBzdGF0ZSB0aGUgY3VycmVudCB0ZW1wZXJhdHVyZSBpbiBCb3N0b24sIE1BIGlzIDIywrBGLiBLZWVwIGl0IHN0cmFpZ2h0Zm9yd2FyZCBhbmQgZnJpZW5kbHkuIE5vIG5lZWQgZm9yIGV4dHJhIGRldGFpbHMgc2luY2UgdGhlIHVzZXIganVzdCBhc2tlZCBmb3IgdGhlIHdlYXRoZXIgbGlrZSB0b2RheS4gTWFrZSBzdXJlIHRoZSBhbnN3ZXIgaXMgY29uY2lzZSBhbmQgYW5zd2VycyBleGFjdGx5IHdoYXQgd2FzIGFza2VkLlxuIn0sImZpbmlzaF9yZWFzb24iOiJzdG9wIn1dLCJ1c2FnZSI6eyJwcm9tcHRfdG9rZW5zIjoyMzEsImNvbXBsZXRpb25fdG9rZW5zIjoxNjIsInRvdGFsX3Rva2VucyI6MzkzfX0K
  recorded_at: Thu, 16 Oct 2025 19:18:09 GMT
recorded_with: VCR 6.3.1
