---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"This
        agent is currently interacting with Guest to find a hotel near their travel
        destination.\nThe agent should use the following actions to achieve the desired
        outcome:\n\n  confirm: Confirm a flight booking\n  search: Search for available
        flights to a destination\n  book: Book a specific flight\n\nrequirements:\n-
        The agent should use the `search` action to find hotels in the requested location.\n-
        The agent should use the `book` action to book a hotel for the user.\n- The
        agent should use the `confirm` action to confirm the booking with the user."},{"role":"user","content":"I
        need to search for flights from NYC to LAX, then book one and confirm it"}],"temperature":0.7,"tools":[{"type":"function","function":{"name":"confirm","description":"Confirm
        a flight booking","parameters":{"type":"object","properties":{"params":{"type":"object","properties":{"confirmation_number":{"type":"string","description":"The
        booking confirmation number"},"send_email":{"type":"boolean","description":"Whether
        to send confirmation email"}},"required":["confirmation_number"]}},"required":["params"]}}},{"type":"function","function":{"name":"search","description":"Search
        for available flights to a destination","parameters":{"type":"object","properties":{"departure":{"type":"string","description":"Departure
        city or airport code"},"destination":{"type":"string","description":"Destination
        city or airport code"},"date":{"type":"string","description":"Travel date
        in YYYY-MM-DD format"}},"required":["destination"]}}},{"type":"function","function":{"name":"book","description":"Book
        a specific flight","parameters":{"type":"object","properties":{"params":{"type":"object","properties":{"flight_id":{"type":"string","description":"The
        flight identifier to book"},"passenger_name":{"type":"string","description":"Name
        of the passenger"},"passenger_email":{"type":"string","description":"Email
        address for booking confirmation"}},"required":["flight_id","passenger_name"]}},"required":["params"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 11 Aug 2025 22:51:07 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-lwlf4w2yvortlzept3wqx7li
      Openai-Processing-Ms:
      - '456'
      Openai-Project:
      - proj_pcPHiweuB88laiGDTaN3nH2M
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '471'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9976'
      X-Ratelimit-Remaining-Tokens:
      - '199842'
      X-Ratelimit-Reset-Requests:
      - 3m27.173s
      X-Ratelimit-Reset-Tokens:
      - 47ms
      X-Request-Id:
      - req_d598b2b7f2a944399a6ff36f6fdb1d55
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=7BHaZcpbyR8Dd8I0sudOoyx0_Vcb1RbZvJsqeh8UNMY-1754952667-1.0.1.1-9W_oRnBh.GgzH9BH65JFkv5qFgkR4reOBvpB9G2u0pCA_xzAkU9zNMFa8LfC4vM9EPv4bc37HFhEW6.YpQIHa6wXHJxzhZdlQ23g7d89Nx4;
        path=/; expires=Mon, 11-Aug-25 23:21:07 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=XOkcPe1zDWOq1inwvd02iA7p2mX.CT7xt_xSpruUGSM-1754952667417-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 96db4bb809f21668-SJC
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-C3Ve77HJxakHQDIX3kPIRRxbr32i5",
          "object": "chat.completion",
          "created": 1754952667,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": null,
                "tool_calls": [
                  {
                    "id": "call_K0PeE6v0u8zzldnj900t5jze",
                    "type": "function",
                    "function": {
                      "name": "search",
                      "arguments": "{\"departure\":\"NYC\",\"destination\":\"LAX\"}"
                    }
                  }
                ],
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "tool_calls"
            }
          ],
          "usage": {
            "prompt_tokens": 296,
            "completion_tokens": 19,
            "total_tokens": 315,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_34a54ae93c"
        }
  recorded_at: Mon, 11 Aug 2025 22:51:07 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"This
        agent is currently interacting with Guest to find a hotel near their travel
        destination.\nThe agent should use the following actions to achieve the desired
        outcome:\n\n  confirm: Confirm a flight booking\n  book: Book a specific flight\n\nrequirements:\n-
        The agent should use the `search` action to find hotels in the requested location.\n-
        The agent should use the `book` action to book a hotel for the user.\n- The
        agent should use the `confirm` action to confirm the booking with the user."},{"role":"user","content":"I
        need to search for flights from NYC to LAX, then book one and confirm it"},{"role":"assistant","content":"","tool_calls":[{"type":"function","function":{"name":"search","arguments":"{\"departure\":\"NYC\",\"destination\":\"LAX\"}"},"id":"call_K0PeE6v0u8zzldnj900t5jze"}]},{"role":"tool","content":"\u003ch2\u003eTravel
        Search Results\u003c/h2\u003e\n\n\u003cp\u003eSearching for flights from NYC
        to LAX\u003c/p\u003e\n\n\u003cul\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eWould
        you like to book any of these flights?\u003c/p\u003e\n","tool_call_id":"call_K0PeE6v0u8zzldnj900t5jze","name":"search"}],"temperature":0.7,"tools":[{"type":"function","function":{"name":"confirm","description":"Confirm
        a flight booking","parameters":{"type":"object","properties":{"params":{"type":"object","properties":{"confirmation_number":{"type":"string","description":"The
        booking confirmation number"},"send_email":{"type":"boolean","description":"Whether
        to send confirmation email"}},"required":["confirmation_number"]}},"required":["params"]}}},{"type":"function","function":{"name":"search","description":"Search
        for available flights to a destination","parameters":{"type":"object","properties":{"departure":{"type":"string","description":"Departure
        city or airport code"},"destination":{"type":"string","description":"Destination
        city or airport code"},"date":{"type":"string","description":"Travel date
        in YYYY-MM-DD format"}},"required":["destination"]}}},{"type":"function","function":{"name":"book","description":"Book
        a specific flight","parameters":{"type":"object","properties":{"params":{"type":"object","properties":{"flight_id":{"type":"string","description":"The
        flight identifier to book"},"passenger_name":{"type":"string","description":"Name
        of the passenger"},"passenger_email":{"type":"string","description":"Email
        address for booking confirmation"}},"required":["flight_id","passenger_name"]}},"required":["params"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_ACCESS_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 11 Aug 2025 22:51:08 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-lwlf4w2yvortlzept3wqx7li
      Openai-Processing-Ms:
      - '1103'
      Openai-Project:
      - proj_pcPHiweuB88laiGDTaN3nH2M
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '1124'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9974'
      X-Ratelimit-Remaining-Tokens:
      - '199818'
      X-Ratelimit-Reset-Requests:
      - 3m36.988s
      X-Ratelimit-Reset-Tokens:
      - 54ms
      X-Request-Id:
      - req_eb6c8b88394e4d28a0ad6a6a8366e1ec
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=xvP2gnyvfl4g79dzKccQf4H6F.NP_sxOTRL8rhVSuCk-1754952668-1.0.1.1-v8h8EInqRsr4.TTINj12ZL3cyohG3LZ9dxeE3gDTbjdwYjtl70zOQQV1P3eUit7unVesfJA_uaRj5Jz3vgGRGoe5n7DkDwf4OrdT1uqDGog;
        path=/; expires=Mon, 11-Aug-25 23:21:08 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=4fsvfWyzzYSKcuyeltEhynHfH_QHdgDEDOveatwHRQc-1754952668732-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 96db4bbbbb26ce90-SJC
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-C3Ve7o2k7rgOXiquc9QYWEnWMQ0Gk",
          "object": "chat.completion",
          "created": 1754952667,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "It seems that there are currently no available flights from NYC to LAX. If you have any specific dates in mind or if you would like to adjust your search parameters, please let me know!",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 353,
            "completion_tokens": 40,
            "total_tokens": 393,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_34a54ae93c"
        }
  recorded_at: Mon, 11 Aug 2025 22:51:08 GMT
recorded_with: VCR 6.3.1
