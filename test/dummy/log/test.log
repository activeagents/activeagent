  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_s_returns_message_content
------------------------------------------------------------------------
---------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_initializes_with_default_values
---------------------------------------------------------------------------
---------------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_instructions_as_a_system_message
---------------------------------------------------------------------------------
--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_message_as_a_user_message
--------------------------------------------------------------------------
--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_messages_as_user_messages
--------------------------------------------------------------------------
----------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_h_returns_hash_representation
----------------------------------------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_message_as_a_user_message
--------------------------------------------------------------------------
---------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_initializes_with_default_values
---------------------------------------------------------------------------
--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_messages_as_user_messages
--------------------------------------------------------------------------
----------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_h_returns_hash_representation
----------------------------------------------------------------------------
------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_s_returns_message_content
------------------------------------------------------------------------
---------------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_instructions_as_a_system_message
---------------------------------------------------------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_s_returns_message_content
------------------------------------------------------------------------
---------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_initializes_with_default_values
---------------------------------------------------------------------------
--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_messages_as_user_messages
--------------------------------------------------------------------------
---------------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_instructions_as_a_system_message
---------------------------------------------------------------------------------
--------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_sets_message_as_a_user_message
--------------------------------------------------------------------------
----------------------------------------------------------------------------
ActiveAgent::ActionPrompt::PromptTest: test_to_h_returns_hash_representation
----------------------------------------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

----------------------------------------------------------------------------------------------
ParameterizedTest: test_should_enqueue_a_parameterized_request_with_the_correct_generation_job
----------------------------------------------------------------------------------------------
ParameterizedTest - test_should_enqueue_a_parameterized_request_with_the_correct_generation_job: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

---------------------------------------------
ParameterizedTest: test_parameterized_headers
---------------------------------------------
------------------------------------------------------
ParameterizedTest: test_enqueue_the_prompt_with_params
------------------------------------------------------
ParameterizedTest - test_enqueue_the_prompt_with_params: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `perform_enqueued_jobs`) can be used, as long as `assert_raises` is inside their block.

-----------------------------------
ParameterizedTest: test_respond_to?
-----------------------------------
-------------------------------------------------------------------
ParameterizedTest: test_degrade_gracefully_when_.with_is_not_called
-------------------------------------------------------------------
---------------------------------------------
ActiveAgentTest: test_it_has_a_version_number
---------------------------------------------
